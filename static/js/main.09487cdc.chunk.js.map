{"version":3,"sources":["components/imageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","App.module.css","components/Searchbar/Searchbar.js","components/imageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Loader/Loader.js","components/Modal/Modal.js","services/images-finder-api.js","components/ImageGallery/ImageGallery.js","App.js","index.js","components/Searchbar/Seachbar.module.css","components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css"],"names":["module","exports","Searchbar","state","searchImages","handleChangeInput","e","currentTarget","name","value","setState","handleSubmitQuery","preventDefault","trim","props","onSubmit","toLowerCase","className","s","searchbar","form","this","type","button","label","input","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","images","handleOpenModal","map","id","tags","webformatURL","largeImageURL","item","onClick","src","alt","img","Button","pageIncrement","Load","color","height","width","timeout","style","margin","Modal","url","hideModal","overlay","modalLoader","modal","modalImg","api","fetchImages","query","key","page","fetch","then","response","ok","json","Promise","reject","Error","ImageGallery","status","moreBtnShow","error","modalShow","scrollTo","window","top","document","documentElement","scrollHeight","behavior","prevState","showModal","addEventListener","find","image","querySelector","overflowY","target","removeEventListener","prevProps","searchQuery","userKey","data","hits","totalHits","catch","length","title","gallery","message","App","USER_KEY","handleSearchQueryOnSubmit","inputValue","app","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.09487cdc.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__1oqU1\",\"img\":\"ImageGalleryItem_img__1UI_9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__1GjiM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1OfLY\"};","import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport s from \"./Seachbar.module.css\";\n\nclass Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func,\n  };\n\n  state = {\n    searchImages: \"\",\n  };\n\n  handleChangeInput = (e) => {\n    const { name, value } = e.currentTarget;\n    this.setState({ [name]: value });\n  };\n\n  handleSubmitQuery = (e) => {\n    e.preventDefault();\n    if (this.state.searchImages.trim(\" \") === \"\") {\n      return;\n    }\n\n    this.props.onSubmit(this.state.searchImages.toLowerCase());\n    this.setState({ searchImages: \"\" });\n  };\n\n  render() {\n    return (\n      <header className={s.searchbar}>\n        <form className={s.form} onSubmit={this.handleSubmitQuery}>\n          <button type=\"submit\" className={s.button}>\n            <span className={s.label}>Search</span>\n          </button>\n\n          <input\n            className={s.input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            name=\"searchImages\"\n            value={this.state.searchImages}\n            onChange={this.handleChangeInput}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import s from \"./ImageGalleryItem.module.css\";\nimport PropTypes from \"prop-types\";\n\nfunction ImageGalleryItem({ images, handleOpenModal }) {\n  return images.map(({ id, tags, webformatURL, largeImageURL }) => (\n    <li\n      className={s.item}\n      // key={webformatURL} //Если на бэке случается баг с повторением картинок и id\n      key={id}\n      onClick={() => handleOpenModal(id, tags, largeImageURL)}\n    >\n      <img src={webformatURL} alt={tags} className={s.img} />\n    </li>\n  ));\n}\n\nexport default ImageGalleryItem;\n\nImageGalleryItem.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.shape),\n  onClickHandler: PropTypes.func,\n};\n","import PropTypes from \"prop-types\";\nimport s from \"./Button.module.css\";\n\nfunction Button({ pageIncrement }) {\n  return (\n    <button className={s.button} type=\"button\" onClick={pageIncrement}>\n      Load more\n    </button>\n  );\n}\n\nexport default Button;\n\nButton.propTypes = {\n  pageIncrement: PropTypes.func,\n};\n","import Loader from \"react-loader-spinner\";\n\nfunction Load() {\n  return (\n    <Loader\n      type=\"ThreeDots\"\n      color=\"#303f9f\"\n      height={30}\n      width={60}\n      timeout={30000}\n      style={{ margin: \"0 auto\" }}\n    />\n  );\n}\n\nexport default Load;\n","import s from \"./Modal.module.css\";\nimport PropTypes from \"prop-types\";\nimport Load from \"../Loader/Loader\";\n\nfunction Modal({ url, tags, hideModal }) {\n  return (\n    <div className={s.overlay} onClick={hideModal}>\n      <div className={s.modalLoader}>\n        <Load />\n      </div>\n      <div className={s.modal}>\n        <img src={url} alt={tags} className={s.modalImg} />\n      </div>\n    </div>\n  );\n}\n\nexport default Modal;\n\nModal.propTypes = {\n  url: PropTypes.string,\n  tags: PropTypes.string,\n  hideModal: PropTypes.func,\n};\n","function fetchImages(query, key, page = 1) {\n  return fetch(\n    `https://pixabay.com/api/?q=${query}&page=${page}&key=${key}&image_type=photo&orientation=horizontal&per_page=12`\n  ).then((response) => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(new Error(\"Oops, something went wrong!\"));\n  });\n}\n\nconst api = { fetchImages };\n\nexport default api;\n","import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport ImageGalleryItem from \"../imageGalleryItem/ImageGalleryItem\";\nimport Button from \"../Button/Button\";\nimport Load from \"../Loader/Loader\";\nimport Modal from \"../Modal/Modal\";\nimport api from \"../../services/images-finder-api\";\nimport s from \"./ImageGallery.module.css\";\n\nclass ImageGallery extends Component {\n  static propTypes = {\n    searchQuery: PropTypes.string,\n    userKey: PropTypes.string,\n  };\n\n  state = {\n    images: null,\n    page: 1,\n    status: \"idle\",\n    moreBtnShow: false,\n    error: null,\n\n    modal: {\n      modalShow: false,\n      url: null,\n      tags: null,\n    },\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { searchQuery, userKey } = this.props;\n\n    if (prevProps.searchQuery !== searchQuery) {\n      this.setState({ page: 1, status: \"pending\" });\n\n      return api\n        .fetchImages(searchQuery, userKey)\n        .then((data) => {\n          this.setState({\n            images: data.hits,\n            status: \"resolved\",\n            moreBtnShow: false,\n          });\n\n          if (data.totalHits > 12) {\n            this.setState({\n              moreBtnShow: true,\n            });\n          }\n\n          this.scrollTo();\n        })\n        .catch((error) => this.setState({ error, status: \"rejected\" }));\n    }\n\n    if (prevState.page < this.state.page) {\n      this.setState({ status: \"pending\" });\n\n      return api\n        .fetchImages(searchQuery, userKey, this.state.page)\n        .then((data) => {\n          this.setState((prevState) => ({\n            images: [...prevState.images, ...data.hits],\n            status: \"resolved\",\n          }));\n\n          if (\n            data.hits.length < 12 ||\n            prevState.images.length + data.hits.length === data.totalHits\n          ) {\n            this.setState({\n              moreBtnShow: false,\n            });\n          }\n\n          this.scrollTo();\n        })\n        .catch((error) => this.setState({ error, status: \"rejected\" }));\n    }\n  }\n\n  scrollTo = () => {\n    return window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n\n  pageIncrement = () => {\n    this.setState((prevState) => ({\n      page: prevState.page + 1,\n    }));\n  };\n\n  showModal = (id, tags, url) => {\n    window.addEventListener(\"keydown\", this.hideModal);\n    if (this.state.images.find((image) => image.id === id)) {\n      document.querySelector(\"body\").style.overflowY = \"hidden\";\n      this.setState({ modal: { modalShow: true, url, tags } });\n    }\n  };\n\n  hideModal = (e) => {\n    if (e.currentTarget === e.target || e.key === \"Escape\") {\n      document.querySelector(\"body\").style.overflowY = \"visible\";\n      this.setState({ modal: { modalShow: false } });\n      window.removeEventListener(\"keydown\", this.hideModal);\n    }\n  };\n\n  render() {\n    const {\n      page,\n      images,\n      status,\n      moreBtnShow,\n      error,\n      modal: { modalShow, url, tags },\n    } = this.state;\n\n    if (status === \"idle\") {\n      return <h1 className={s.title}>What are you interested now?</h1>;\n    }\n\n    if (status === \"pending\") {\n      return (\n        <>\n          {page === 1 ? (\n            <Load />\n          ) : (\n            <>\n              <ul className={s.gallery}>\n                <ImageGalleryItem\n                  images={images}\n                  handleOpenModal={this.showModal}\n                />\n              </ul>\n              <Load />\n            </>\n          )}\n        </>\n      );\n    }\n\n    if (status === \"resolved\") {\n      if (images.length === 0) {\n        return (\n          <p className={s.message}>\n            Nothing was found, please try another request!\n          </p>\n        );\n      }\n\n      return (\n        <>\n          <ul className={s.gallery}>\n            <ImageGalleryItem\n              images={images}\n              handleOpenModal={this.showModal}\n            />\n          </ul>\n          {moreBtnShow && <Button pageIncrement={this.pageIncrement} />}\n          {modalShow && (\n            <Modal url={url} tags={tags} hideModal={this.hideModal} />\n          )}\n        </>\n      );\n    }\n\n    if (status === \"rejected\") {\n      return <h1 className={s.error}>{error.message}</h1>;\n    }\n  }\n}\n\nexport default ImageGallery;\n","import { Component } from \"react\";\nimport Searchbar from \"./components/Searchbar/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\nimport s from \"./App.module.css\";\n\nclass App extends Component {\n  state = {\n    searchQuery: \"\",\n  };\n\n  USER_KEY = \"22971640-b13f0b0978f0830ddac6b5885\";\n\n  handleSearchQueryOnSubmit = (inputValue) => {\n    this.setState({ searchQuery: inputValue });\n  };\n\n  render() {\n    return (\n      <div className={s.app}>\n        <Searchbar onSubmit={this.handleSearchQueryOnSubmit} />\n        <ImageGallery\n          searchQuery={this.state.searchQuery}\n          userKey={this.USER_KEY}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Seachbar_searchbar__jh0M8\",\"form\":\"Seachbar_form__1Gsrc\",\"button\":\"Seachbar_button__1JZPD\",\"label\":\"Seachbar_label__3PTip\",\"input\":\"Seachbar_input__3j4tr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__nReFm\",\"title\":\"ImageGallery_title__3cttW\",\"message\":\"ImageGallery_message__1kH9K\",\"error\":\"ImageGallery_error__3Wtah\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__1a2F5\",\"modal\":\"Modal_modal__16mPa\",\"modalImg\":\"Modal_modalImg__3f_aP\",\"modalLoader\":\"Modal_modalLoader__1yK0n\"};"],"sourceRoot":""}