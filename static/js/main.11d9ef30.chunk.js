(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(9),o=a.n(s),c=(a(16),a(17),a(3)),i=a(4),l=a(6),u=a(5),h=(a(18),a(10)),m=a(0),d=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={inputValue:""},e.handleChangeInput=function(t){var a=t.currentTarget,n=a.name,r=a.value;e.setState(Object(h.a)({},n,r))},e.handleSubmitQuery=function(t){t.preventDefault(),""!==e.state.inputValue.trim(" ")&&(e.props.onSubmit(e.state.inputValue.toLowerCase()),e.setState({inputValue:""}))},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(m.jsx)("header",{className:"Searchbar",children:Object(m.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmitQuery,children:[Object(m.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(m.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(m.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",name:"inputValue",value:this.state.inputValue,onChange:this.handleChangeInput})]})})}}]),a}(n.Component),p=d,j=a(8);var g=function(e){var t=e.images,a=e.onClickHandler;return t.map((function(e){var t=e.id,n=e.tags,r=e.webformatURL,s=e.largeImageURL;return Object(m.jsx)("li",{className:"ImageGalleryItem",onClick:function(){return a(t,n,s)},children:Object(m.jsx)("img",{src:r,alt:n,className:"ImageGalleryItem-image"})},t)}))};var b=function(e){var t=e.pageIncrement;return Object(m.jsx)("button",{className:"Button",type:"button",onClick:function(){t()},children:"Load More"})},f=a(11),O=a.n(f);var y=function(){return Object(m.jsx)(O.a,{className:"Spinner",type:"ThreeDots",color:"#303f9f",height:30,width:60,timeout:5e3})};var v=function(e){var t=e.url,a=e.tags,n=e.closeModal;return Object(m.jsx)("div",{className:"Overlay",onClick:n,children:Object(m.jsx)("div",{className:"Modal",children:Object(m.jsx)("img",{src:t,alt:a})})})},S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={images:null,error:null,page:1,status:"idle",moreBtnShow:!1,modal:{show:!1,url:null,tags:null}},e.scrollTo=function(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.pageIncrement=function(){e.setState((function(e){return{page:e.page+1}}))},e.showModal=function(t,a,n){window.addEventListener("keydown",e.closeModal),e.state.images.find((function(e){return e.id===t}))&&e.setState({modal:{show:!0,url:n,tags:a}})},e.closeModal=function(t){t.currentTarget!==t.target&&"Escape"!==t.key||(e.setState({modal:{show:!1}}),window.removeEventListener("keydown",e.closeModal))},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;return t.page!==this.state.page&&null!==this.state.images?(this.setState({status:"pending"}),setTimeout((function(){return fetch("https://pixabay.com/api/?q=".concat(a.props.searchQuery,"&page=").concat(a.state.page,"&key=").concat(a.props.userKey,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.ok?e.json():Promise.reject(new Error("\u0423\u043f\u0441, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"))})).then((function(e){a.setState((function(t){return{images:[].concat(Object(j.a)(t.images),Object(j.a)(e.hits)),status:"resolved"}})),(e.hits.length<12||t.images.length+e.hits.length===e.totalHits)&&a.setState({moreBtnShow:!1}),a.scrollTo()})).catch((function(e){return a.setState({error:e})}))}),2e3)):e.searchQuery!==this.props.searchQuery?(this.setState({page:1,status:"pending",images:null}),setTimeout((function(){return fetch("https://pixabay.com/api/?q=".concat(a.props.searchQuery,"&page=").concat(a.state.page,"&key=").concat(a.props.userKey,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.ok?e.json():Promise.reject(new Error("\u0423\u043f\u0441, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"))})).then((function(e){a.setState({images:e.hits,status:"resolved",moreBtnShow:!1}),e.totalHits>12&&a.setState({moreBtnShow:!0}),a.scrollTo()})).catch((function(e){return a.setState({error:e})}))}),0)):void 0}},{key:"render",value:function(){return"idle"===this.state.status?Object(m.jsx)("h1",{children:"What are you interested now?"}):"pending"===this.state.status?Object(m.jsx)(m.Fragment,{children:null===this.state.images?Object(m.jsx)(y,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("ul",{className:"ImageGallery",children:Object(m.jsx)(g,{images:this.state.images,onClickHandler:this.handlerOnClickItem})}),Object(m.jsx)(y,{})]})}):"resolved"===this.state.status?0===this.state.images.length?Object(m.jsx)("p",{children:"Nothing found"}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("ul",{className:"ImageGallery",children:Object(m.jsx)(g,{images:this.state.images,onClickHandler:this.showModal})}),this.state.moreBtnShow&&Object(m.jsx)(b,{pageIncrement:this.pageIncrement}),this.state.modal.show&&Object(m.jsx)(v,{url:this.state.modal.url,tags:this.state.modal.tags,closeModal:this.closeModal})]}):void 0}}]),a}(n.Component),x=S,w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.USER_KEY="22971640-b13f0b0978f0830ddac6b5885",e.handleSearchQueryOnSubmit=function(t){e.setState({searchQuery:t})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(p,{onSubmit:this.handleSearchQueryOnSubmit}),Object(m.jsx)(x,{searchQuery:this.state.searchQuery,userKey:this.USER_KEY})]})}}]),a}(n.Component),k=w;o.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(k,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.11d9ef30.chunk.js.map