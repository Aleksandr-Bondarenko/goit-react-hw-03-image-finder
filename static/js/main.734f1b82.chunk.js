(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={item:"ImageGalleryItem_item__1oqU1",img:"ImageGalleryItem_img__1UI_9"}},15:function(e,t,a){e.exports={button:"Button_button__1GjiM"}},17:function(e,t,a){e.exports={app:"App_app__1OfLY"}},22:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(13),o=a.n(s),c=(a(22),a(3)),l=a(4),i=a(6),h=a(5),u=a(14),m=a(7),d=a.n(m),g=a(0),j=function(e){Object(i.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={searchImages:""},e.handleChangeInput=function(t){var a=t.currentTarget,n=a.name,r=a.value;e.setState(Object(u.a)({},n,r))},e.handleSubmitQuery=function(t){t.preventDefault(),""!==e.state.searchImages.trim(" ")&&(e.props.onSubmit(e.state.searchImages.toLowerCase()),e.setState({searchImages:""}))},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(g.jsx)("header",{className:d.a.searchbar,children:Object(g.jsxs)("form",{className:d.a.form,onSubmit:this.handleSubmitQuery,children:[Object(g.jsx)("button",{type:"submit",className:d.a.button,children:Object(g.jsx)("span",{className:d.a.label,children:"Search"})}),Object(g.jsx)("input",{className:d.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",name:"searchImages",value:this.state.searchImages,onChange:this.handleChangeInput})]})})}}]),a}(n.Component),b=j,p=a(12),f=a(11),y=a.n(f);var O=function(e){var t=e.images,a=e.handleOpenModal;return t.map((function(e){var t=e.id,n=e.tags,r=e.webformatURL,s=e.largeImageURL;return Object(g.jsx)("li",{className:y.a.item,onClick:function(){return a(t,n,s)},children:Object(g.jsx)("img",{src:r,alt:n,className:y.a.img})},t)}))},_=a(15),v=a.n(_);var x=function(e){var t=e.handlePageIncrement;return Object(g.jsx)("button",{className:v.a.button,type:"button",onClick:t,children:"Load more"})},w=a(16),S=a.n(w);var I=function(){return Object(g.jsx)(S.a,{type:"ThreeDots",color:"#303f9f",height:30,width:60,timeout:3e4,style:{margin:"0 auto"}})},N=a(9),M=a.n(N);var k=function(e){var t=e.url,a=e.tags,n=e.hideModal;return window.addEventListener("keydown",n),Object(g.jsxs)("div",{className:M.a.overlay,onClick:n,children:[Object(g.jsx)("div",{className:M.a.modalLoader,children:Object(g.jsx)(I,{})}),Object(g.jsx)("div",{className:M.a.modal,children:Object(g.jsx)("img",{src:t,alt:a,className:M.a.modalImg})})]})};var C={fetchImages:function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=").concat("22971640-b13f0b0978f0830ddac6b5885","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Oops, something went wrong!"))}))}},P=a(8),Q=a.n(P),L=function(e){Object(i.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={images:[],status:"idle",moreBtnShow:!1,error:null,modal:{modalShow:!1,url:null,tags:null}},e.scrollTo=function(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.showModal=function(t,a,n){e.state.images.find((function(e){return e.id===t}))&&(document.querySelector("body").style.overflowY="hidden",e.setState({modal:{modalShow:!0,url:n,tags:a}}))},e.hideModal=function(t){t.currentTarget!==t.target&&"Escape"!==t.key||(document.querySelector("body").style.overflowY="visible",e.setState({modal:{modalShow:!1}}),window.removeEventListener("keydown",e.hideModal))},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this,a=this.props,n=a.searchQuery,r=a.page;if(e.searchQuery!==n||e.page!==r)return this.setState({status:"pending"}),C.fetchImages(n,r).then((function(a){t.setState((function(t){return{images:t.images&&r>1?[].concat(Object(p.a)(t.images),Object(p.a)(a.hits)):a.hits,status:"resolved",moreBtnShow:e.searchQuery===n?t.images.length+a.hits.length!==a.totalHits:a.totalHits>12}})),t.scrollTo()})).catch((function(e){return t.setState({error:e,status:"rejected"})}))}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.status,n=e.moreBtnShow,r=e.error,s=e.modal,o=s.modalShow,c=s.url,l=s.tags;return"idle"===a?Object(g.jsx)("h1",{className:Q.a.title,children:"What are you interested now?"}):"pending"===a?Object(g.jsx)(g.Fragment,{children:1===this.props.page?Object(g.jsx)(I,{}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("ul",{className:Q.a.gallery,children:Object(g.jsx)(O,{images:t,handleOpenModal:this.showModal})}),Object(g.jsx)(I,{})]})}):"resolved"===a?0===t.length?Object(g.jsx)("p",{className:Q.a.message,children:"Nothing was found, please try another request!"}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("ul",{className:Q.a.gallery,children:Object(g.jsx)(O,{images:t,handleOpenModal:this.showModal})}),n&&Object(g.jsx)(x,{handlePageIncrement:this.props.handlePageIncrement}),o&&Object(g.jsx)(k,{url:c,tags:l,hideModal:this.hideModal})]}):"rejected"===a?Object(g.jsx)("h1",{className:Q.a.error,children:r.message}):void 0}}]),a}(n.Component),G=L,T=a(17),E=a.n(T),F=function(e){Object(i.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:"",page:null},e.handleSearchQueryOnSubmit=function(t){e.setState({searchQuery:t,page:1})},e.handlePageIncrement=function(){e.setState((function(e){return{page:e.page+1}}))},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:E.a.app,children:[Object(g.jsx)(b,{onSubmit:this.handleSearchQueryOnSubmit}),Object(g.jsx)(G,{searchQuery:this.state.searchQuery,page:this.state.page,handlePageIncrement:this.handlePageIncrement})]})}}]),a}(n.Component),q=F;o.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(q,{})}),document.getElementById("root"))},7:function(e,t,a){e.exports={searchbar:"Seachbar_searchbar__jh0M8",form:"Seachbar_form__1Gsrc",button:"Seachbar_button__1JZPD",label:"Seachbar_label__3PTip",input:"Seachbar_input__3j4tr"}},8:function(e,t,a){e.exports={gallery:"ImageGallery_gallery__nReFm",title:"ImageGallery_title__3cttW",message:"ImageGallery_message__1kH9K",error:"ImageGallery_error__3Wtah"}},9:function(e,t,a){e.exports={overlay:"Modal_overlay__1a2F5",modal:"Modal_modal__16mPa",modalImg:"Modal_modalImg__3f_aP",modalLoader:"Modal_modalLoader__1yK0n"}}},[[44,1,2]]]);
//# sourceMappingURL=main.734f1b82.chunk.js.map