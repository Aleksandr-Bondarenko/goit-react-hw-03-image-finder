(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={item:"ImageGalleryItem_item__1oqU1",img:"ImageGalleryItem_img__1UI_9"}},15:function(e,t,a){e.exports={button:"Button_button__1GjiM"}},17:function(e,t,a){e.exports={app:"App_app__1OfLY"}},22:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(13),o=a.n(s),c=(a(22),a(3)),l=a(4),i=a(6),u=a(5),h=a(14),m=a(7),d=a.n(m),g=a(0),j=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={searchImages:""},e.handleChangeInput=function(t){var a=t.currentTarget,r=a.name,n=a.value;e.setState(Object(h.a)({},r,n))},e.handleSubmitQuery=function(t){t.preventDefault(),""!==e.state.searchImages.trim(" ")&&(e.props.onSubmit(e.state.searchImages.toLowerCase()),e.setState({searchImages:""}))},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(g.jsx)("header",{className:d.a.searchbar,children:Object(g.jsxs)("form",{className:d.a.form,onSubmit:this.handleSubmitQuery,children:[Object(g.jsx)("button",{type:"submit",className:d.a.button,children:Object(g.jsx)("span",{className:d.a.label,children:"Search"})}),Object(g.jsx)("input",{className:d.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",name:"searchImages",value:this.state.searchImages,onChange:this.handleChangeInput})]})})}}]),a}(r.Component),b=j,p=a(12),f=a(11),_=a.n(f);var y=function(e){var t=e.images,a=e.handleOpenModal;return t.map((function(e){var t=e.id,r=e.tags,n=e.webformatURL,s=e.largeImageURL;return Object(g.jsx)("li",{className:_.a.item,onClick:function(){return a(t,r,s)},children:Object(g.jsx)("img",{src:n,alt:r,className:_.a.img})},t)}))},O=a(15),v=a.n(O);var S=function(e){var t=e.pageIncrement;return Object(g.jsx)("button",{className:v.a.button,type:"button",onClick:t,children:"Load more"})},x=a(16),w=a.n(x);var I=function(){return Object(g.jsx)(w.a,{type:"ThreeDots",color:"#303f9f",height:30,width:60,timeout:3e4,style:{margin:"0 auto"}})},M=a(9),N=a.n(M);var k=function(e){var t=e.url,a=e.tags,r=e.hideModal;return Object(g.jsxs)("div",{className:N.a.overlay,onClick:r,children:[Object(g.jsx)("div",{className:N.a.modalLoader,children:Object(g.jsx)(I,{})}),Object(g.jsx)("div",{className:N.a.modal,children:Object(g.jsx)("img",{src:t,alt:a,className:N.a.modalImg})})]})};var C={fetchImages:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(a,"&key=").concat(t,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Oops, something went wrong!"))}))}},E=C,L=a(8),Q=a.n(L),G=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={images:null,page:1,status:"idle",moreBtnShow:!1,error:null,modal:{modalShow:!1,url:null,tags:null}},e.scrollTo=function(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.pageIncrement=function(){e.setState((function(e){return{page:e.page+1}}))},e.showModal=function(t,a,r){window.addEventListener("keydown",e.hideModal),e.state.images.find((function(e){return e.id===t}))&&(document.querySelector("body").style.overflowY="hidden",e.setState({modal:{modalShow:!0,url:r,tags:a}}))},e.hideModal=function(t){t.currentTarget!==t.target&&"Escape"!==t.key||(document.querySelector("body").style.overflowY="visible",e.setState({modal:{modalShow:!1}}),window.removeEventListener("keydown",e.hideModal))},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,r=this.props,n=r.searchQuery,s=r.userKey;return e.searchQuery!==n?(this.setState({page:1,status:"pending"}),E.fetchImages(n,s).then((function(e){a.setState({images:e.hits,status:"resolved",moreBtnShow:!1}),e.totalHits>12&&a.setState({moreBtnShow:!0}),a.scrollTo()})).catch((function(e){return a.setState({error:e,status:"rejected"})}))):t.page<this.state.page?(this.setState({status:"pending"}),E.fetchImages(n,s,this.state.page).then((function(e){a.setState((function(t){return{images:[].concat(Object(p.a)(t.images),Object(p.a)(e.hits)),status:"resolved"}})),(e.hits.length<12||t.images.length+e.hits.length===e.totalHits)&&a.setState({moreBtnShow:!1}),a.scrollTo()})).catch((function(e){return a.setState({error:e,status:"rejected"})}))):void 0}},{key:"render",value:function(){var e=this.state,t=e.page,a=e.images,r=e.status,n=e.moreBtnShow,s=e.error,o=e.modal,c=o.modalShow,l=o.url,i=o.tags;return"idle"===r?Object(g.jsx)("h1",{className:Q.a.title,children:"What are you interested now?"}):"pending"===r?Object(g.jsx)(g.Fragment,{children:1===t?Object(g.jsx)(I,{}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("ul",{className:Q.a.gallery,children:Object(g.jsx)(y,{images:a,handleOpenModal:this.showModal})}),Object(g.jsx)(I,{})]})}):"resolved"===r?0===a.length?Object(g.jsx)("p",{className:Q.a.message,children:"Nothing was found, please try another request!"}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("ul",{className:Q.a.gallery,children:Object(g.jsx)(y,{images:a,handleOpenModal:this.showModal})}),n&&Object(g.jsx)(S,{pageIncrement:this.pageIncrement}),c&&Object(g.jsx)(k,{url:l,tags:i,hideModal:this.hideModal})]}):"rejected"===r?Object(g.jsx)("h1",{className:Q.a.error,children:s.message}):void 0}}]),a}(r.Component),T=G,B=a(17),U=a.n(B),F=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:""},e.USER_KEY="22971640-b13f0b0978f0830ddac6b5885",e.handleSearchQueryOnSubmit=function(t){e.setState({searchQuery:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:U.a.app,children:[Object(g.jsx)(b,{onSubmit:this.handleSearchQueryOnSubmit}),Object(g.jsx)(T,{searchQuery:this.state.searchQuery,userKey:this.USER_KEY})]})}}]),a}(r.Component),K=F;o.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(K,{})}),document.getElementById("root"))},7:function(e,t,a){e.exports={searchbar:"Seachbar_searchbar__jh0M8",form:"Seachbar_form__1Gsrc",button:"Seachbar_button__1JZPD",label:"Seachbar_label__3PTip",input:"Seachbar_input__3j4tr"}},8:function(e,t,a){e.exports={gallery:"ImageGallery_gallery__nReFm",title:"ImageGallery_title__3cttW",message:"ImageGallery_message__1kH9K",error:"ImageGallery_error__3Wtah"}},9:function(e,t,a){e.exports={overlay:"Modal_overlay__1a2F5",modal:"Modal_modal__16mPa",modalImg:"Modal_modalImg__3f_aP",modalLoader:"Modal_modalLoader__1yK0n"}}},[[44,1,2]]]);
//# sourceMappingURL=main.09487cdc.chunk.js.map