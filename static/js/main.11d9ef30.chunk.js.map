{"version":3,"sources":["components/Searchbar/Searchbar.js","components/imageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Loader/Loader.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["Searchbar","state","inputValue","handleChangeInput","e","currentTarget","name","value","setState","handleSubmitQuery","preventDefault","trim","props","onSubmit","toLowerCase","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","images","onClickHandler","map","id","tags","webformatURL","largeImageURL","onClick","src","alt","Button","pageIncrement","Load","color","height","width","timeout","Modal","url","closeModal","ImageGallery","error","page","status","moreBtnShow","modal","show","scrollTo","window","top","document","documentElement","scrollHeight","behavior","prevState","showModal","addEventListener","find","image","target","key","removeEventListener","prevProps","setTimeout","fetch","searchQuery","userKey","then","res","ok","json","Promise","reject","Error","data","hits","length","totalHits","catch","handlerOnClickItem","App","USER_KEY","handleSearchQueryOnSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.11d9ef30.chunk.js","sourcesContent":["import { Component } from \"react\";\n\nclass Searchbar extends Component {\n  state = {\n    inputValue: \"\",\n  };\n\n  handleChangeInput = (e) => {\n    const { name, value } = e.currentTarget;\n    this.setState({ [name]: value });\n  };\n\n  handleSubmitQuery = (e) => {\n    e.preventDefault();\n    if (this.state.inputValue.trim(\" \") === \"\") {\n      return;\n    }\n\n    this.props.onSubmit(this.state.inputValue.toLowerCase());\n    this.setState({ inputValue: \"\" });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handleSubmitQuery}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            name=\"inputValue\"\n            value={this.state.inputValue}\n            onChange={this.handleChangeInput}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","function ImageGalleryItem({ images, onClickHandler }) {\n  return images.map(({ id, tags, webformatURL, largeImageURL }) => (\n    <li\n      className=\"ImageGalleryItem\"\n      key={id}\n      onClick={() => onClickHandler(id, tags, largeImageURL)}\n    >\n      <img src={webformatURL} alt={tags} className=\"ImageGalleryItem-image\" />\n    </li>\n  ));\n}\n\nexport default ImageGalleryItem;\n","function Button({ pageIncrement }) {\n  return (\n    <button\n      className=\"Button\"\n      type=\"button\"\n      onClick={() => {\n        pageIncrement();\n      }}\n    >\n      Load More\n    </button>\n  );\n}\n\nexport default Button;\n","import Loader from \"react-loader-spinner\";\n\nfunction Load() {\n  return (\n    <Loader\n      className=\"Spinner\"\n      type=\"ThreeDots\"\n      color=\"#303f9f\"\n      height={30}\n      width={60}\n      timeout={5000}\n    />\n  );\n}\n\nexport default Load;\n","function Modal({ url, tags, closeModal }) {\n  return (\n    <div className=\"Overlay\" onClick={closeModal}>\n      <div className=\"Modal\">\n        <img src={url} alt={tags} />\n      </div>\n    </div>\n  );\n}\n\nexport default Modal;\n","import { Component } from \"react\";\nimport ImageGalleryItem from \"../imageGalleryItem/ImageGalleryItem\";\nimport Button from \"../Button/Button\";\nimport Load from \"../Loader/Loader\";\nimport Modal from \"../Modal/Modal\";\n\nclass ImageGallery extends Component {\n  state = {\n    images: null,\n    error: null,\n    page: 1,\n    status: \"idle\",\n    moreBtnShow: false,\n    modal: {\n      show: false,\n      url: null,\n      tags: null,\n    },\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.page !== this.state.page && this.state.images !== null) {\n      this.setState({ status: \"pending\" });\n      return setTimeout(\n        () =>\n          fetch(\n            `https://pixabay.com/api/?q=${this.props.searchQuery}&page=${this.state.page}&key=${this.props.userKey}&image_type=photo&orientation=horizontal&per_page=12`\n          )\n            .then((res) => {\n              if (res.ok) {\n                return res.json();\n              }\n              return Promise.reject(new Error(\"Упс, что-то пошло не так!\"));\n            })\n            .then((data) => {\n              this.setState((prevState) => ({\n                images: [...prevState.images, ...data.hits],\n                status: \"resolved\",\n              }));\n\n              if (\n                data.hits.length < 12 ||\n                prevState.images.length + data.hits.length === data.totalHits\n              ) {\n                this.setState({\n                  moreBtnShow: false,\n                });\n              }\n\n              this.scrollTo();\n            })\n            .catch((error) => this.setState({ error })),\n        2000\n      );\n    }\n\n    if (prevProps.searchQuery !== this.props.searchQuery) {\n      this.setState({ page: 1, status: \"pending\", images: null });\n      return setTimeout(\n        () =>\n          fetch(\n            `https://pixabay.com/api/?q=${this.props.searchQuery}&page=${this.state.page}&key=${this.props.userKey}&image_type=photo&orientation=horizontal&per_page=12`\n          )\n            .then((res) => {\n              if (res.ok) {\n                return res.json();\n              }\n              return Promise.reject(new Error(\"Упс, что-то пошло не так!\"));\n            })\n            .then((data) => {\n              this.setState({\n                images: data.hits,\n                status: \"resolved\",\n                moreBtnShow: false,\n              });\n\n              if (data.totalHits > 12) {\n                this.setState({\n                  moreBtnShow: true,\n                });\n              }\n\n              this.scrollTo();\n            })\n            .catch((error) => this.setState({ error })),\n        0\n      );\n    }\n  }\n\n  scrollTo = () => {\n    return window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n\n  pageIncrement = () => {\n    this.setState((prevState) => ({\n      page: prevState.page + 1,\n    }));\n  };\n\n  showModal = (id, tags, url) => {\n    window.addEventListener(\"keydown\", this.closeModal);\n\n    if (this.state.images.find((image) => image.id === id)) {\n      this.setState({ modal: { show: true, url, tags } });\n    }\n  };\n\n  closeModal = (e) => {\n    if (e.currentTarget === e.target || e.key === \"Escape\") {\n      this.setState({ modal: { show: false } });\n      window.removeEventListener(\"keydown\", this.closeModal);\n    }\n  };\n\n  render() {\n    if (this.state.status === \"idle\") {\n      return <h1>What are you interested now?</h1>;\n    }\n\n    if (this.state.status === \"pending\") {\n      return (\n        <>\n          {this.state.images === null ? (\n            <Load />\n          ) : (\n            <>\n              <ul className=\"ImageGallery\">\n                <ImageGalleryItem\n                  images={this.state.images}\n                  onClickHandler={this.handlerOnClickItem}\n                />\n              </ul>\n              <Load />\n            </>\n          )}\n        </>\n      );\n    }\n\n    if (this.state.status === \"resolved\") {\n      if (this.state.images.length === 0) {\n        return <p>Nothing found</p>;\n      }\n\n      return (\n        <>\n          <ul className=\"ImageGallery\">\n            <ImageGalleryItem\n              images={this.state.images}\n              onClickHandler={this.showModal}\n            />\n          </ul>\n          {this.state.moreBtnShow && (\n            <Button pageIncrement={this.pageIncrement} />\n          )}\n          {this.state.modal.show && (\n            <Modal\n              url={this.state.modal.url}\n              tags={this.state.modal.tags}\n              closeModal={this.closeModal}\n            />\n          )}\n        </>\n      );\n    }\n  }\n}\n\nexport default ImageGallery;\n","import { Component } from \"react\";\nimport \"./App.css\";\nimport Searchbar from \"./components/Searchbar/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\n\nclass App extends Component {\n  state = {\n    searchQuery: \"\",\n  };\n\n  USER_KEY = \"22971640-b13f0b0978f0830ddac6b5885\";\n\n  handleSearchQueryOnSubmit = (searchQuery) => {\n    this.setState({ searchQuery });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.handleSearchQueryOnSubmit} />\n        <ImageGallery\n          searchQuery={this.state.searchQuery}\n          userKey={this.USER_KEY}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./styles.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}